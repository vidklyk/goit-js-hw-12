{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = '17309902-7cbadf7b99e6a7450a84508e7';\n\nexport async function fetchImages(searchedQuery, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: myApiKey,\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\" target=\"_blank\">\n        <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" class=\"gallery-img\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes</b> ${imgInfo.likes}</p>\n        <p><b>Views</b> ${imgInfo.views}</p>\n        <p><b>Comments</b> ${imgInfo.comments}</p>\n        <p><b>Downloads</b> ${imgInfo.downloads}</p>\n      </div>\n    </li>`;\n};\n\nexport const initializeLightbox = () => {\n  return new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n};\n\nexport const clearGallery = () => {\n  document.querySelector('.gallery').innerHTML = '';\n};\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  createGalleryCardTemplate,\n  initializeLightbox,\n  clearGallery,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst moreBtnEl = document.querySelector('.more-btn');\n\nlet lightbox = null;\nlet searchQuery = '';\nlet page = 1;\n\nfunction showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  showLoader();\n\n  searchQuery = event.currentTarget.elements.search_text.value.trim();\n\n  if (!searchQuery) {\n    iziToast.show({\n      color: 'red',\n      message: 'Please enter a search query!',\n    });\n    hideLoader();\n    return;\n  }\n\n  event.currentTarget.elements.search_text.value = '';\n  page = 1;\n  clearGallery();\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n\n    if (!response.hits.length) {\n      iziToast.show({\n        color: 'red',\n        message: 'No images found. Try a different search!',\n      });\n      hideLoader();\n      return;\n    }\n\n    galleryEl.innerHTML = response.hits.map(createGalleryCardTemplate).join('');\n    moreBtnEl.classList.toggle('is-hidden', response.hits.length < 15);\n\n    if (!lightbox) {\n      lightbox = initializeLightbox();\n    } else {\n      lightbox.refresh();\n    }\n  } catch (error) {\n    iziToast.show({\n      color: 'red',\n      message: 'Error loading images. Please try again later.',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst loadMoreBtnClick = async () => {\n  try {\n    page++;\n    const response = await fetchImages(searchQuery, page);\n\n    if (!response.hits.length) {\n      iziToast.show({\n        color: 'yellow',\n        message: 'No more images to load!',\n      });\n      moreBtnEl.classList.add('is-hidden');\n      return;\n    }\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      response.hits.map(createGalleryCardTemplate).join('')\n    );\n    lightbox.refresh();\n\n    const firstCard = document.querySelector('.gallery-card');\n    if (firstCard) {\n      window.scrollBy({\n        top: firstCard.getBoundingClientRect().height * 4,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nmoreBtnEl.addEventListener('click', loadMoreBtnClick);\ndocument.addEventListener('DOMContentLoaded', hideLoader);\n"],"names":["myApiKey","fetchImages","searchedQuery","page","BASE_URL","params","axios","error","createGalleryCardTemplate","imgInfo","initializeLightbox","SimpleLightbox","clearGallery","searchFormEl","galleryEl","loaderEl","moreBtnEl","lightbox","searchQuery","showLoader","hideLoader","onSearchFormSubmit","event","iziToast","response","loadMoreBtnClick","firstCard"],"mappings":"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"}