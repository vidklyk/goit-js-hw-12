{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = '17309902-7cbadf7b99e6a7450a84508e7';\n\nexport function fetchImages(searchedQuery, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: myApiKey,\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n\n  return axios\n    .get(BASE_URL, { params })\n    .then(response => response.data)\n    .catch(error => {\n      console.error('Fetch error:', error);\n      throw error;\n    });\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\" target=\"_blank\">\n        <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" class=\"gallery-img\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes</b> ${imgInfo.likes}</p>\n        <p><b>Views</b> ${imgInfo.views}</p>\n        <p><b>Comments</b> ${imgInfo.comments}</p>\n        <p><b>Downloads</b> ${imgInfo.downloads}</p>\n      </div>\n    </li>`;\n};\n\nexport const initializeLightbox = () => {\n  return new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n};\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  createGalleryCardTemplate,\n  initializeLightbox,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader.is-hidden');\nconst moreBtnEl = document.querySelector('.more-btn');\n\nlet lightbox = null;\nlet searchQuery = '';\nlet page = 1;\n\nfunction showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  showLoader();\n\n  searchQuery = event.currentTarget.elements.search_text.value.trim();\n  event.currentTarget.elements.search_text.value = '';\n  page = 1;\n\n  if (!searchQuery) {\n    hideLoader();\n    return;\n  }\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n    console.log(response.hits);\n\n    if (!response.hits.length) {\n      iziToast.show({\n        color: 'red',\n        message: `Sorry, there are no images matching your search query. Please try again!`,\n      });\n      hideLoader();\n      return;\n    }\n\n    galleryEl.innerHTML = response.hits.map(createGalleryCardTemplate).join('');\n\n    if (response.hits.length < 15) {\n      moreBtnEl.classList.add('is-hidden');\n    } else {\n      moreBtnEl.classList.remove('is-hidden');\n    }\n\n    if (!lightbox) {\n      lightbox = initializeLightbox();\n    } else {\n      lightbox.refresh();\n    }\n\n    hideLoader();\n  } catch (error) {\n    iziToast.show({\n      color: 'red',\n      message: `Error loading images. Please try again later.`,\n    });\n    console.error(error);\n    hideLoader();\n  }\n};\n\nconst loadMoreBtnClick = async () => {\n  try {\n    page++;\n\n    const response = await fetchImages(searchQuery, page);\n\n    galleryEl.insertAdjacentHTML(\n      'beforeend',\n      response.hits.map(createGalleryCardTemplate).join('')\n    );\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    const galleryCards = document.querySelectorAll('.gallery-card');\n    if (galleryCards.length > 0) {\n      const cardHeight = galleryCards[0].getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 4,\n        behavior: 'smooth',\n      });\n    }\n\n    if (response.hits.length < 15) {\n      moreBtnEl.classList.add('is-hidden');\n    }\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nmoreBtnEl.addEventListener('click', loadMoreBtnClick);\ndocument.addEventListener('DOMContentLoaded', hideLoader);\n"],"names":["myApiKey","fetchImages","searchedQuery","page","BASE_URL","params","axios","response","error","createGalleryCardTemplate","imgInfo","initializeLightbox","SimpleLightbox","searchFormEl","galleryEl","loaderEl","moreBtnEl","lightbox","searchQuery","showLoader","hideLoader","onSearchFormSubmit","event","iziToast","loadMoreBtnClick","galleryCards","cardHeight"],"mappings":"wyBAEA,MAAMA,EAAW,qCAEV,SAASC,EAAYC,EAAeC,EAAO,EAAG,CACnD,MAAMC,EAAW,2BACXC,EAAS,CACb,IAAKL,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EAEE,OAAOG,EACJ,IAAIF,EAAU,CAAE,OAAAC,EAAQ,EACxB,KAAKE,GAAYA,EAAS,IAAI,EAC9B,MAAMC,GAAS,CACd,cAAQ,MAAM,eAAgBA,CAAK,EAC7BA,CACZ,CAAK,CACL,CCpBO,MAAMC,EAA4BC,GAChC;AAAA;AAAA,iBAEQA,EAAQ,aAAa;AAAA,oBAClBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,0BAGpCA,EAAQ,KAAK;AAAA,0BACbA,EAAQ,KAAK;AAAA,6BACVA,EAAQ,QAAQ;AAAA,8BACfA,EAAQ,SAAS;AAAA;AAAA,WAKlCC,EAAqB,IACzB,IAAIC,EAAe,aAAc,CACtC,SAAU,GACV,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,WAAY,EAChB,CAAG,ECjBGC,EAAe,SAAS,cAAc,OAAO,EAC7CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAW,SAAS,cAAc,mBAAmB,EACrDC,EAAY,SAAS,cAAc,WAAW,EAEpD,IAAIC,EAAW,KACXC,EAAc,GACdf,EAAO,EAEX,SAASgB,GAAa,CACpBJ,EAAS,UAAU,OAAO,WAAW,CACvC,CAEA,SAASK,GAAa,CACpBL,EAAS,UAAU,IAAI,WAAW,CACpC,CAEA,MAAMM,EAAqB,MAAMC,GAAS,CAQxC,GAPAA,EAAM,eAAc,EACpBH,IAEAD,EAAcI,EAAM,cAAc,SAAS,YAAY,MAAM,OAC7DA,EAAM,cAAc,SAAS,YAAY,MAAQ,GACjDnB,EAAO,EAEH,CAACe,EAAa,CAChBE,IACA,MACD,CAED,GAAI,CACF,MAAMb,EAAW,MAAMN,EAAYiB,EAAaf,CAAI,EAGpD,GAFA,QAAQ,IAAII,EAAS,IAAI,EAErB,CAACA,EAAS,KAAK,OAAQ,CACzBgB,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,0EACjB,CAAO,EACDH,IACA,MACD,CAEDN,EAAU,UAAYP,EAAS,KAAK,IAAIE,CAAyB,EAAE,KAAK,EAAE,EAEtEF,EAAS,KAAK,OAAS,GACzBS,EAAU,UAAU,IAAI,WAAW,EAEnCA,EAAU,UAAU,OAAO,WAAW,EAGnCC,EAGHA,EAAS,QAAO,EAFhBA,EAAWN,EAAkB,EAK/BS,GACD,OAAQZ,EAAO,CACde,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,+CACf,CAAK,EACD,QAAQ,MAAMf,CAAK,EACnBY,GACD,CACH,EAEMI,EAAmB,SAAY,CACnC,GAAI,CACFrB,IAEA,MAAMI,EAAW,MAAMN,EAAYiB,EAAaf,CAAI,EAEpDW,EAAU,mBACR,YACAP,EAAS,KAAK,IAAIE,CAAyB,EAAE,KAAK,EAAE,CAC1D,EAEQQ,GACFA,EAAS,QAAO,EAGlB,MAAMQ,EAAe,SAAS,iBAAiB,eAAe,EAC9D,GAAIA,EAAa,OAAS,EAAG,CAC3B,MAAMC,EAAaD,EAAa,CAAC,EAAE,sBAAqB,EAAG,OAC3D,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,CACF,CAEGnB,EAAS,KAAK,OAAS,IACzBS,EAAU,UAAU,IAAI,WAAW,CAEtC,OAAQR,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,EAEAK,EAAa,iBAAiB,SAAUQ,CAAkB,EAC1DL,EAAU,iBAAiB,QAASQ,CAAgB,EACpD,SAAS,iBAAiB,mBAAoBJ,CAAU"}