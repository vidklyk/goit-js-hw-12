{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst myApiKey = '17309902-7cbadf7b99e6a7450a84508e7';\n\nexport async function fetchImages(searchedQuery, page = 1) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: myApiKey,\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Fetch error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imgInfo => {\n  return `\n    <li class=\"gallery-card\">\n      <a href=\"${imgInfo.largeImageURL}\" target=\"_blank\">\n        <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" class=\"gallery-img\" />\n      </a>\n      <div class=\"info\">\n        <p><b>Likes</b> ${imgInfo.likes}</p>\n        <p><b>Views</b> ${imgInfo.views}</p>\n        <p><b>Comments</b> ${imgInfo.comments}</p>\n        <p><b>Downloads</b> ${imgInfo.downloads}</p>\n      </div>\n    </li>`;\n};\n\nexport const renderGallery = (images, container) => {\n  container.insertAdjacentHTML(\n    'beforeend',\n    images.map(createGalleryCardTemplate).join('')\n  );\n};\n\nexport const clearGallery = () => {\n  document.querySelector('.gallery').innerHTML = '';\n};\n\nexport const initializeLightbox = () => {\n  return new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    scrollZoom: false,\n  });\n};\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  createGalleryCardTemplate,\n  renderGallery,\n  clearGallery,\n  initializeLightbox,\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.form');\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst moreBtnEl = document.querySelector('.more-btn');\n\nlet lightbox = null;\nlet searchQuery = '';\nlet page = 1;\n\nfunction showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nfunction showMoreButton() {\n  moreBtnEl.classList.remove('is-hidden');\n}\n\nfunction hideMoreButton() {\n  moreBtnEl.classList.add('is-hidden');\n}\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n  showLoader();\n  hideMoreButton();\n\n  searchQuery = event.currentTarget.elements.search_text.value.trim();\n  event.currentTarget.elements.search_text.value = '';\n  page = 1;\n\n  if (!searchQuery) {\n    hideLoader();\n    iziToast.show({\n      color: 'red',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n\n    if (!response.hits.length) {\n      clearGallery();\n      iziToast.show({\n        color: 'red',\n        message: 'Sorry, no images found. Try another search!',\n      });\n      hideLoader();\n      return;\n    }\n\n    clearGallery();\n    renderGallery(response.hits, galleryEl);\n\n    if (!lightbox) {\n      lightbox = initializeLightbox();\n    } else {\n      lightbox.refresh();\n    }\n\n    hideLoader();\n\n    if (response.hits.length < 15) {\n      hideMoreButton();\n    } else {\n      showMoreButton();\n    }\n  } catch (error) {\n    iziToast.show({\n      color: 'red',\n      message: 'Error loading images. Please try again later.',\n    });\n    console.error(error);\n    hideLoader();\n  }\n};\n\nconst loadMoreBtnClick = async () => {\n  page++;\n  showLoader();\n  hideMoreButton();\n\n  try {\n    const response = await fetchImages(searchQuery, page);\n\n    if (!response.hits.length) {\n      iziToast.show({\n        color: 'red',\n        message: 'You have reached the end of the collection.',\n      });\n      hideLoader();\n      return;\n    }\n\n    renderGallery(response.hits, galleryEl);\n\n    if (lightbox) {\n      lightbox.refresh();\n    }\n\n    const galleryCards = document.querySelectorAll('.gallery-card');\n    if (galleryCards.length > 0) {\n      const cardHeight = galleryCards[0].getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n\n    hideLoader();\n\n    if (response.hits.length < 15) {\n      hideMoreButton();\n      iziToast.show({\n        color: 'blue',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    } else {\n      showMoreButton();\n    }\n  } catch (error) {\n    console.error(error);\n    hideLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nmoreBtnEl.addEventListener('click', loadMoreBtnClick);\ndocument.addEventListener('DOMContentLoaded', hideLoader);\n"],"names":["myApiKey","fetchImages","searchedQuery","page","BASE_URL","params","axios","error","createGalleryCardTemplate","imgInfo","renderGallery","images","container","clearGallery","initializeLightbox","SimpleLightbox","searchFormEl","galleryEl","loaderEl","moreBtnEl","lightbox","searchQuery","showLoader","hideLoader","showMoreButton","hideMoreButton","onSearchFormSubmit","event","iziToast","response","loadMoreBtnClick","galleryCards","cardHeight"],"mappings":"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"}